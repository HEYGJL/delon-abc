{"version":3,"file":"numberToChinese.js","sources":["../../../../packages/abc/number-to-chinese/number-to-chinese.ts","../../../../packages/abc/number-to-chinese/number-to-chinese.pipe.ts","../../../../packages/abc/number-to-chinese/number-to-chinese.module.ts","../../../../packages/abc/number-to-chinese/numberToChinese.ts"],"sourcesContent":["import { NzSafeAny } from 'ng-zorro-antd/core/types';\nimport { NumberToChineseOptions } from './number-to-chinese.interfaces';\n\n/**\n * @deprecated Will be removed in 12.0.0, Pls used `CurrencyService.cny` instead\n */\nexport function numberToChinese(value: number | string, rmb: boolean = true, options?: NumberToChineseOptions): string {\n  options = {\n    minusSymbol: '负',\n    validThrow: false,\n    ...options,\n  };\n  if (typeof value === 'number') value = value.toString();\n  if (!/^-?\\d+(\\.\\d+)?$/.test(value) && options.validThrow) throw new Error(`${value} is invalid number type`);\n  let integer: number | string;\n  let decimal: number | string | null;\n  [integer, decimal] = value.split('.');\n  let symbol = '';\n  if (integer.startsWith('-')) {\n    symbol = options.minusSymbol!;\n    integer = integer.substr(1);\n  }\n  if (/^-?\\d+$/.test(value)) decimal = null;\n  integer = (+integer).toString();\n  const unit = {\n    num: rmb\n      ? ['', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖', '点']\n      : ['', '一', '二', '三', '四', '五', '六', '七', '八', '九', '点'],\n    radice: rmb\n      ? ['', '拾', '佰', '仟', '万', '拾', '佰', '仟', '亿', '拾', '佰', '仟', '万亿', '拾', '佰', '仟', '兆', '拾', '佰', '仟']\n      : ['', '十', '百', '千', '万', '十', '百', '千', '亿', '十', '百', '千', '万亿', '十', '百', '千', '兆', '十', '百', '千'],\n    dec: ['角', '分', '厘', '毫'],\n  };\n  if (rmb) value = (+value).toFixed(5).toString();\n  let integerRes = '';\n  const integerCount = integer.length;\n  if (integer === '0' || integerCount === 0) {\n    integerRes = '零';\n  } else {\n    let cnDesc = '';\n    for (let i = 0; i < integerCount; i++) {\n      const n = +integer[i];\n      const j = integerCount - i - 1;\n      const isZero = i > 1 && n !== 0 && integer[i - 1] === '0';\n      const cnZero = isZero ? '零' : '';\n      const isEmpptyUnit = (n === 0 && j % 4 !== 0) || integer.substr(i - 3, 4) === '0000';\n      const descMark = cnDesc;\n      let cnNum = unit.num[n];\n\n      cnDesc = isEmpptyUnit ? '' : unit.radice[j];\n      // 第一位是一十\n      if (i === 0 && cnNum === '一' && cnDesc === '十') cnNum = '';\n      const isChangeEr =\n        n > 1 &&\n        cnNum === '二' && // 去除首位\n        ['', '十', '百'].indexOf(cnDesc) === -1 && // 不读两\\两十\\两百\n        descMark !== '十'; // 不读十两\n      if (isChangeEr) cnNum = '两';\n      integerRes += cnZero + cnNum + cnDesc;\n    }\n  }\n\n  // 小数部分拼接\n  let decimalRes = '';\n  const decimalCount = decimal ? decimal.toString().length : 0;\n  if (decimal === null) {\n    decimalRes = rmb ? '整' : '';\n  } else if (decimal === '0') {\n    decimalRes = '零';\n  } else {\n    for (let i = 0; i < decimalCount; i++) {\n      if (rmb && i > unit.dec.length - 1) break;\n      const n = decimal[i];\n      const cnZero = n === '0' ? '零' : '';\n      const cnNum = (unit.num as NzSafeAny)[n];\n      const cnDesc = rmb ? unit.dec[i] : '';\n      decimalRes += cnZero + cnNum + cnDesc;\n    }\n  }\n  const ret =\n    symbol +\n    (rmb ? integerRes + (decimalRes === '零' ? '元整' : `元${decimalRes}`) : integerRes + (decimalRes === '' ? '' : `点${decimalRes}`));\n  return ret;\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { numberToChinese } from './number-to-chinese';\n\n/**\n *  @deprecated Will be removed in 12.0.0, Pls used [cny](/util/pipes-currency/zh#cny) pipe instead\n */\n@Pipe({ name: 'n2c' })\nexport class NaNumberToChinesePipe implements PipeTransform {\n  transform(value: number | string, rmb: boolean = true, minusSymbol: string = '负'): string {\n    return numberToChinese(value, rmb, { minusSymbol });\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NaNumberToChinesePipe } from './number-to-chinese.pipe';\n\nconst PIPES = [NaNumberToChinesePipe];\n\n/**\n * @deprecated Will be removed in 12.0.0, Pls used `CurrencyService.cny` instead\n */\n@NgModule({\n  imports: [CommonModule],\n  declarations: PIPES,\n  exports: PIPES,\n})\nexport class NumberToChineseModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}