/**
 * @license ng-alain(cipchk@qq.com) v11.6.0
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/router"),require("@delon/util/decorator"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@delon/abc/full-content",["exports","@angular/common","@angular/core","@angular/router","@delon/util/decorator","rxjs","rxjs/operators"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc["full-content"]={}),e.ng.common,e.ng.core,e.ng.router,e.decorator,e.rxjs,e.rxjs.operators)}(this,(function(e,t,n,o,r,i,c){"use strict";function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var u=s(n);function l(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}Object.create;Object.create;var p=function(){function e(){this._change=new i.BehaviorSubject(null)}return e.prototype.toggle=function(){this._change.next(!0)},Object.defineProperty(e.prototype,"change",{get:function(){return this._change.pipe(c.share())},enumerable:!1,configurable:!0}),e}();p.ɵprov=u.ɵɵdefineInjectable({factory:function(){return new p},token:p,providedIn:"root"}),p.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}];var d="full-content__body",f="full-content__opened",h="full-content__hidden-title",g=function(){function e(e,t,o,r,i){this.el=e,this.cdr=t,this.srv=o,this.router=r,this.doc=i,this.inited=!1,this.id="_full-content-"+Math.random().toString(36).substring(2),this.scroll$=null,this._height=0,this.hideTitle=!0,this.padding=24,this.fullscreenChange=new n.EventEmitter}return e.prototype.updateCls=function(){var e=this.bodyEl.classList;this.fullscreen?(e.add(f),this.hideTitle&&e.add(h)):(e.remove(f),this.hideTitle&&e.remove(h))},e.prototype.update=function(){this.updateCls(),this.updateHeight(),this.fullscreenChange.emit(this.fullscreen)},e.prototype.updateHeight=function(){this._height=this.bodyEl.getBoundingClientRect().height-this.el.nativeElement.getBoundingClientRect().top-this.padding,this.cdr.detectChanges()},e.prototype.removeInBody=function(){this.bodyEl.classList.remove(d,f,h)},e.prototype.ngOnInit=function(){var e=this;this.inited=!0,this.bodyEl=this.doc.querySelector("body"),this.bodyEl.classList.add(d),this.el.nativeElement.id=this.id,this.updateCls(),this.scroll$=i.fromEvent(window,"resize").pipe(c.debounceTime(200)).subscribe((function(){return e.updateHeight()})),this.srv$=this.srv.change.pipe(c.filter((function(e){return null!==e}))).subscribe((function(){return e.toggle()})),this.route$=this.router.events.pipe(c.filter((function(e){return e instanceof o.ActivationStart||e instanceof o.ActivationEnd})),c.debounceTime(200)).subscribe((function(){e.doc.querySelector("#"+e.id)?(e.bodyEl.classList.add(d),e.updateCls()):e.removeInBody()}))},e.prototype.toggle=function(){this.fullscreen=!this.fullscreen,this.update(),this.updateHeight()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){return e.updateHeight()}))},e.prototype.ngOnChanges=function(){this.inited&&this.update()},e.prototype.ngOnDestroy=function(){this.removeInBody(),this.scroll$.unsubscribe(),this.srv$.unsubscribe(),this.route$.unsubscribe()},e}();g.decorators=[{type:n.Component,args:[{selector:"full-content",exportAs:"fullContent",template:" <ng-content></ng-content> ",host:{"[class.full-content]":"true","[style.height.px]":"_height"},preserveWhitespaces:!1,changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None}]}],g.ctorParameters=function(){return[{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:p},{type:o.Router},{type:void 0,decorators:[{type:n.Inject,args:[t.DOCUMENT]}]}]},g.propDecorators={fullscreen:[{type:n.Input}],hideTitle:[{type:n.Input}],padding:[{type:n.Input}],fullscreenChange:[{type:n.Output}]},l([r.InputBoolean(),a("design:type",Boolean)],g.prototype,"fullscreen",void 0),l([r.InputBoolean(),a("design:type",Object)],g.prototype,"hideTitle",void 0),l([r.InputNumber(),a("design:type",Object)],g.prototype,"padding",void 0);var y=function(){function e(e){this.parent=e}return e.prototype._click=function(){this.parent.toggle()},e}();y.decorators=[{type:n.Directive,args:[{selector:"[full-toggle]",exportAs:"fullToggle",host:{"(click)":"_click()"}}]}],y.ctorParameters=function(){return[{type:g}]};var b=[g,y],v=function(){};v.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:b,exports:b}]}],e.FullContentComponent=g,e.FullContentModule=v,e.FullContentService=p,e.FullContentToggleDirective=y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=fullContent.umd.min.js.map